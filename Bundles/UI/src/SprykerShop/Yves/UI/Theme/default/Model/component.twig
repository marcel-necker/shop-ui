
{#
 #
 #
 # Component API
 # 
 # @important: use components with 'only' keyword 
 # and limit the scope to what you pass through data interface
 #}

{# @var {string} define css BEM block name #}
{%- set name = name | default(null) -%}

{# @var {string} define container custom element base element with "is="element" #}
{%- set container = container | default(null) -%}

{# @var {boolean} define custom element closing tag #}
{%- set selfClosing = selfClosing | default(false) -%}

{# @var {string} define addictional css class(es) #}
{%- set class = class | default('') -%}

{# @var {array[string]} define css BEM modifier's tails array #}
{%- set modifiers = modifiers | default([]) -%}

{# @var {string} define js selector #}
{%- set selector = selector | default(null) -%}

{# @var {object} define html5 attributes #}
{%- set attributes = attributes | default({}) -%}

{# @var {object} define data interface #}
{%- set data = data | default({}) -%}

{# @var {boolean} set debug mode #}
{%- set debug = debug | default(false) -%}

{#
 #
 #
 # Component blocks
 #}

{# with debug=false the blocks are created but not rendered on page load #}
{%- if debug -%}

    {# create 'class', 'selector' and 'attr' blocks #}
    {# to use them: {{ block('blockname') }} #}

    {# render element tag name #}
    {%- block tagName -%}
        {%- if container -%}{{container}}{%- else -%}{{name}}{%- endif -%}
    {%- endblock -%}

    {# render custom element extension #}
    {%- block isElementOfType -%}
        {% if container -%} is="{{name-}}"{% endif -%}
    {%- endblock -%}

    {# render BEM classes (block and modifiers) according to the name #}
    {%- block classes -%}
        {{- name -}} 
        {% for modifier in modifiers %} {{name}}--{{modifier}}{% endfor -%}
        {% if class %} {{class-}}{% endif -%}
        {% if selector %} {{selector-}}{% endif -%}
    {%- endblock -%}

    {# render html5 attributes #}
    {%- block attributes -%}
        {%- for attrname, attrvalue in attributes -%}
            {%- if attrvalue is sameas(true) -%}
                {{-attrname}}
            {%- elseif attrvalue is not sameas(false) -%}
                {{-attrname}}='{{attrvalue}}'
            {%- endif -%}
        {%- endfor -%}
    {%- endblock -%}

    {# define the body block where to place component html/twig #}
    {%- block body -%}{%- endblock -%}

{%- endif -%}

{#
 #
 #
 # Component
 #}
{%- block component -%}
    <{{-block('tagName')}} {{block('isElementOfType')}} class="{{block('classes')}}" {{block('attributes')}} {%- if selfClosing -%}/{%- endif -%}>
    {%- if not selfClosing -%}
        {{-block('body')-}}
    </{{-block('tagName')-}}>
    {%- endif -%}
{%- endblock -%}
