{% extends model('component') %}

{% set config = {
    name: 'simple-carousel',
    tag: 'simple-carousel'
} | merge(config | default({})) %}

{% set data = {
    slides: data.slides | default([])
} | merge(data | default({})) %}

{% set attributes = {
    'slides-to-display': attributes['slides-to-display'] | default(1)
} | merge(attributes | default({})) %}

{% set slideWidth = (100 / attributes['slides-to-display']) %}
{% set hasMoreThenOneSlide = data.slides | length > 1 %}

{% block body %}
    {% if hasMoreThenOneSlide %}
        <div class="{{config.name}}__prev">
            <a href="#prev" class="{{config.selector}}__prev link link--alt">
                {% include atom('icon') with {
                    modifiers: ['big'],
                    data: {
                        name: 'chevron-left'
                    }
                } only %}
            </a>
        </div>
    {% endif %}
    
    <div class="{{config.name}}__slider">
        <div class="{{config.name}}__grid {{config.selector}}__grid grid grid--stretch">
            {% for slide in data.slides %}
                <div class="{{config.selector}}__slide col col--middle text-center" style="width:{{slideWidth}}%;min-width:{{slideWidth}}%;">
                    {% block slide %}{% endblock %}
                </div>
            {% endfor %}
        </div>
    </div>

    {% if hasMoreThenOneSlide %}
        <div class="{{config.name}}__next">
            <a href="#next" class="{{config.selector}}__next link link--alt">
                {% include atom('icon') with {
                    modifiers: ['big'],
                    data: {
                        name: 'chevron-right'
                    }
                } only %}
            </a>
        </div>
    {% endif %}
{% endblock %}
